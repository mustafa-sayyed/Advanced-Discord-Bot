name: ğŸ¯ Contribution Tracker Auto-Reply

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened,synchronize]

jobs:
  contribution-tracker-reply:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write

    steps:
      - name: ğŸ“ Reply to Issue with Contribution Tracker
        if: github.event_name == 'issues'
        uses: actions/github-script@v7
        with:
          script: |
            const issueNumber = context.issue.number;
            const author = context.payload.issue.user.login;

            const message = `
            <div align="center">

            # ğŸ¯ **MANDATORY: Contribution Tracker Update** ğŸ¯

            </div>

            ---

            ### ğŸ‘‹ Hello @${author}!

            <div align="center">

            ğŸ‰ **Thank you for creating Issue #${issueNumber}!** ğŸ‰

            </div>

            As part of our **GSSoC tracking system**, you **MUST** update our contribution tracker immediately.

            <div align="center">

            ## ğŸ“Š **[ğŸ”— ACCESS CONTRIBUTION TRACKER HERE ğŸ”—](https://docs.google.com/spreadsheets/d/1v-5TxMQUkxz7leIyV9wf1DeFKvL59ZAx1n3QZqw7-g8/edit?usp=sharing)**

            </div>

            ---

            ## âš ï¸ **CRITICAL REQUIREMENTS** âš ï¸

            <div align="center">

            | ğŸš¨ **ACTION** | ğŸ“ **DESCRIPTION** |
            |---------------|-------------------|
            | âœ… **ADD ENTRY** | Create new row with this issue details |
            | âœ… **UPDATE STATUS** | Change status when issue is closed/resolved |
            | âœ… **ACCURATE DATA** | Provide only truthful information |
            | âŒ **NO TAMPERING** | Never modify others' entries |

            </div>

            ---

            ## ï¿½ **WHAT TO UPDATE IN TRACKER:**

            <div align="center">

            | ğŸ·ï¸ **FIELD** | ğŸ“ **VALUE** |
            |--------------|-------------|
            | **GitHub Username** | \`${author}\` |
            | **Issue/PR Number** | \`#${issueNumber}\` |
            | **Type** | \`Issue\` |
            | **Title** | \`"${context.payload.issue.title}"\` |
            | **Status** | \`Open\` â†’ **UPDATE when closed/resolved** |
            | **Date Created** | \`${new Date().toISOString().split('T')[0]}\` |

            </div>

            ---

            ## ğŸ”„ **STATUS UPDATE REQUIREMENT**

            <div align="center">

            ### ğŸš¨ **YOU MUST UPDATE STATUS CHANGES** ğŸš¨

            | ğŸ“Š **CURRENT STATUS** | â¡ï¸ **UPDATE TO** | ğŸ“… **WHEN** |
            |---------------------|----------------|-------------|
            | \`Open\` | \`Closed\` | When issue is closed |
            | \`Open\` | \`Resolved\` | When issue is fixed |
            | \`Open\` | \`In Progress\` | When you start working |
            | \`Open\` | \`Under Review\` | When under review |

            </div>

            ---

            ## ï¿½ï¸ **VIOLATION CONSEQUENCES**

            <div align="center">

            > ### ï¿½ **We maintain backup copies and monitor ALL changes**

            </div>

            <div align="center">

            | ï¿½ **VIOLATIONS** | â›” **CONSEQUENCES** |
            |------------------|-------------------|
            | Fake/misleading data | **PERMANENT BAN** |
            | Tampering with others' data | **REPORTED TO GSSOC** |
            | Ignoring tracker updates | **BLOCKED FROM PROGRAMS** |
            | Status not updated | **CONTRIBUTION INVALID** |

            </div>

            ---

            ## ğŸ–ï¸ **WHY THIS MATTERS**

            <div align="center">

            | ğŸ“Š **BENEFIT** | ğŸ’ **IMPACT** |
            |---------------|---------------|
            | **Quality Control** | Ensures genuine contributions |
            | **Fair Recognition** | Proper credit for your work |
            | **GSSoC Reports** | Official program tracking |
            | **Leaderboards** | Community recognition |

            </div>

            ---

            <div align="center">

            ## âœ¨ **THANK YOU FOR CONTRIBUTING!** âœ¨

            ### ğŸš€ *Your efforts make this project better!* ğŸš€

            **Remember: Update the tracker now AND when status changes!**

            </div>
            `;

            github.rest.issues.createComment({
              issue_number: issueNumber,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: message
            });

      - name: ğŸ“ Reply to PR with Contribution Tracker
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v7
        with:
          script: |
            const prNumber = context.issue.number;
            const author = context.payload.pull_request.user.login;

            const message = `
            <div align="center">

            # ğŸ¯ **MANDATORY: Contribution Tracker Update** ğŸ¯

            </div>

            ---

            ### ğŸ‘‹ Hello @${author}!

            <div align="center">

            ğŸ‰ **Thank you for submitting PR #${prNumber}!** ğŸ‰

            </div>

            As part of our **GSSoC tracking system**, you **MUST** update our contribution tracker immediately.

            <div align="center">

            ## ğŸ“Š **[ğŸ”— ACCESS CONTRIBUTION TRACKER HERE ğŸ”—](https://docs.google.com/spreadsheets/d/1v-5TxMQUkxz7leIyV9wf1DeFKvL59ZAx1n3QZqw7-g8/edit?usp=sharing)**

            </div>

            ---

            ## âš ï¸ **CRITICAL REQUIREMENTS** âš ï¸

            <div align="center">

            | ğŸš¨ **ACTION** | ğŸ“ **DESCRIPTION** |
            |---------------|-------------------|
            | âœ… **ADD ENTRY** | Create new row with this PR details |
            | âœ… **UPDATE STATUS** | Change status when PR is merged/closed |
            | âœ… **ACCURATE DATA** | Provide only truthful information |
            | âŒ **NO TAMPERING** | Never modify others' entries |

            </div>

            ---

            ## ï¿½ **WHAT TO UPDATE IN TRACKER:**

            <div align="center">

            | ğŸ·ï¸ **FIELD** | ğŸ“ **VALUE** |
            |--------------|-------------|
            | **GitHub Username** | \`${author}\` |
            | **Issue/PR Number** | \`#${prNumber}\` |
            | **Type** | \`Pull Request\` |
            | **Title** | \`"${context.payload.pull_request.title}"\` |
            | **Status** | \`Open\` â†’ **UPDATE when merged/closed** |
            | **Date Created** | \`${new Date().toISOString().split('T')[0]}\` |

            </div>

            ---

            ## ğŸ”„ **STATUS UPDATE REQUIREMENT**

            <div align="center">

            ### ğŸš¨ **YOU MUST UPDATE STATUS CHANGES** ğŸš¨

            | ğŸ“Š **CURRENT STATUS** | â¡ï¸ **UPDATE TO** | ğŸ“… **WHEN** |
            |---------------------|----------------|-------------|
            | \`Open\` | \`Merged\` | When PR is merged |
            | \`Open\` | \`Closed\` | When PR is closed/rejected |
            | \`Open\` | \`Under Review\` | When being reviewed |
            | \`Open\` | \`Changes Requested\` | When changes needed |

            </div>

            ---

            ## ï¿½ï¸ **VIOLATION CONSEQUENCES**

            <div align="center">

            > ### ï¿½ **We maintain backup copies and monitor ALL changes**

            </div>

            <div align="center">

            | ï¿½ **VIOLATIONS** | â›” **CONSEQUENCES** |
            |------------------|-------------------|
            | Fake/misleading data | **PERMANENT BAN** |
            | Tampering with others' data | **REPORTED TO GSSOC** |
            | Ignoring tracker updates | **BLOCKED FROM PROGRAMS** |
            | Status not updated | **CONTRIBUTION INVALID** |

            </div>

            ---

            ## ğŸ–ï¸ **WHY THIS MATTERS**

            <div align="center">

            | ğŸ“Š **BENEFIT** | ğŸ’ **IMPACT** |
            |---------------|---------------|
            | **Quality Control** | Ensures genuine contributions |
            | **Fair Recognition** | Proper credit for your work |
            | **GSSoC Reports** | Official program tracking |
            | **Leaderboards** | Community recognition |

            </div>

            ---

            <div align="center">

            ## âœ¨ **THANK YOU FOR CONTRIBUTING!** âœ¨

            ### ğŸš€ *Your efforts make this project better!* ğŸš€

            **Remember: Update the tracker now AND when status changes!**

            </div>
            `;

            github.rest.issues.createComment({
              issue_number: prNumber,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: message
            });
